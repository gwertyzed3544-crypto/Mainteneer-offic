import streamlit as st
import urllib.parse

# 1. ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ ูุงููุงุฌูุฉ
st.set_page_config(page_title="ุงูููุชุจ ุงูููุฏุณู ููุชุทููุฑ ุงูุชูููููุฌู", page_icon="โ๏ธ", layout="centered")

# ุชูุณูู ุงููุธูุฑ ูููุงุณุจ ุงูููุจุงูู ูุชูุณูู ุงููุบุฉ ุงูุนุฑุจูุฉ
st.markdown("""
    <style>
    .main { text-align: right; direction: rtl; }
    div.stButton > button:first-child { 
        background-color: #008CBA; color: white; border-radius: 10px; height: 3.5em; width: 100%; font-weight: bold; font-size: 18px;
    }
    video { border-radius: 15px; box-shadow: 0px 4px 10px rgba(0,0,0,0.2); }
    </style>
    """, unsafe_allow_content=True)

# 2. ุฑุฃุณ ุงูุตูุญุฉ ูุงูููุฏูู ุงูุชุฑุญูุจู
st.title("๐๏ธ ุงูููุชุจ ุงูููุฏุณู ููุชุทููุฑ ุงูุชูููููุฌู")
st.write("ูุฑุญุจุงู ุจู ูู ูุธุงููุง ุงูุฐูู ููุตูุงูุฉ ุงููุชูุงููุฉ")
st.video("1000400648.mp4") # ููุฏูู ุงููุณุงุนุฏ ุงูุฐูู

st.divider()

# 3. ูุณู ุงุฎุชูุงุฑ ุงูุฎุฏูุฉ ูุงูุชุดุฎูุต
category = st.selectbox("ุงุฎุชุฑ ุงูุฌูุงุฒ ุงูุฐู ูุญุชุงุฌ ุตูุงูุฉ:", ["ุชูููู", "ูุนุฏุงุช ูุทุงุนู", "ุบุณุงูุฉ/ุซูุงุฌุฉ"])

if category == "ุชูููู":
    st.video("1000050656.mp4") # ููุฏูู ุตูุงูุฉ ุงูุชูููู
    st.info("๐ค ูุณุงุนุฏ ุงูุชูููู: ูู ููุงุฌู ุฌูุงุฒู ุฅุญุฏู ูุฐู ุงููุดุงููุ")
    issue = st.radio("ูุตู ุงูุนุทู:", ["ูุง ูุจุฑุฏ", "ุตูุช ุนุงูู", "ุชุณุฑูุจ ููุงู", "ูุง ูุนูู"])

elif category == "ุบุณุงูุฉ/ุซูุงุฌุฉ":
    st.video("1000050654.mp4") # ููุฏูู ุงูุบุณุงูุฉ ูุงููููุฑูููู
    st.info("๐ค ูุณุงุนุฏ ุงูุฃุฌูุฒุฉ ุงูููุฒููุฉ: ูููุฑ ุตูุงูุฉ ููุบุณุงูุงุชุ ุงูุซูุงุฌุงุชุ ูุงููููุฑูููู")
    issue = st.text_input("ุงูุชุจ ุงูุนุทู ุฃู ููุฏ ุงูุฎุทุฃ (ูุซูุงู E3):")

else:
    st.info("๐ค ูุณู ูุนุฏุงุช ุงููุทุงุนู: ุตูุงูุฉ ุงูููุงูุงุชุ ุซูุงุฌุงุช ุงูุนุฑุถุ ูุงูุฃูุฑุงู")
    issue = st.text_input("ุงูุชุจ ููุน ุงููุนุฏุฉ ูุงููุดููุฉ:")

# 4. ุฏููู ุงูุฃุนุทุงู ุงูุณุฑูุน
with st.expander("๐ ุฏููู ุฃููุงุฏ ุงูุฃุนุทุงู ูููุณุงุนุฏุฉ"):
    st.table({
        "ุงูููุฏ": ["E1", "EC", "OE", "DE"],
        "ุงูุฌูุงุฒ": ["ุชูููู", "ุชูููู", "ุบุณุงูุฉ", "ุบุณุงูุฉ"],
        "ุงููุนูู": ["ุนุทู ุญุณุงุณ", "ููุต ูุฑููู", "ุตุฑู ููุงู", "ุจุงุจ ููุชูุญ"]
    })

# 5. ุจูุงูุงุช ุงูุนููู ูุงููููุน
st.subheader("๐ ุญุฌุฒ ููุนุฏ ุตูุงูุฉ")
name = st.text_input("ุงูุงุณู ุจุงููุงูู")
phone = st.text_input("ุฑูู ุงููุงุชุณุงุจ")
address = st.text_area("ุงูุนููุงู ุจุงูุชูุตูู")

# ููุฏูู ุชุนุฒูุฒ ุงูุซูุฉ (ุงุณุฃู ุฎุจูุฑ)
st.video("1000051946.mp4")

# 6. ุฒุฑ ุงูุฅุฑุณุงู
if st.button("ุฅุฑุณุงู ุทูุจ ุงูุตูุงูุฉ"):
    if name and phone:
        my_number = "201015530296"
        report = f"๐จ *ุทูุจ ุตูุงูุฉ ุฌุฏูุฏ ููููุชุจ ุงูููุฏุณู*\n\n๐ค ุงูุนููู: {name}\n๐ ูุงุชู: {phone}\n๐ฆ ุงูุฌูุงุฒ: {category}\nโ๏ธ ุงูุนุทู: {issue}\n๐ ุงูุนููุงู: {address}"
        encoded_report = urllib.parse.quote(report)
        whatsapp_url = f"https://wa.me/{my_number}?text={encoded_report}"
        
        st.success("โ ุชู ุชุฌููุฒ ุงูุชูุฑูุฑ ุงูููู!")
        st.markdown(f'''
            <a href="{whatsapp_url}" target="_blank" style="text-decoration:none;">
                <div style="background-color:#25D366;color:white;padding:15px;text-align:center;border-radius:10px;font-weight:bold;">
                    ุชุฃููุฏ ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ ุงูููุชุจ
                </div>
            </a>
            ''', unsafe_allow_content=True)
    else:
        st.error("โ๏ธ ูุฑุฌู ุฅุฏุฎุงู ุงูุงุณู ูุฑูู ุงููุงุชู")

# ุฒุฑ ุงููููุน ุงูุฌุบุฑุงูู
st.markdown(f'<a href="https://www.google.com/maps" target="_blank" style="text-decoration:none;"><div style="background-color:#f39c12;color:white;padding:10px;text-align:center;border-radius:10px;margin-top:10px;">๐ ุงุถุบุท ููุง ูุฅุฑุณุงู ูููุนู ูููููุฏุณ</div></a>', unsafe_allow_content=True)
